#################################################################
## Lighting Automations
#################################################################

        ##########################################################
        ## Reset Exterior Garage Light Brightness when Garage Closed
        ##########################################################

- alias: Lights - Reset Exterior Garage Light Brightness when Garage Closed
  id: 'lights_reset_exterior_garage_light_brightness_when_garage_closed'

  trigger:
    - platform: state
      entity_id: cover.garage_door
      to: 'closed'
      for:
        hours: 0
        minutes: 5
        seconds: 0

  condition:
    - condition: state
      entity_id: input_boolean.disable_door_open_lights_on
      state: 'off'
    - condition: state
      entity_id: sun.sun
      state: 'below_horizon'
    - condition: state
      entity_id: light.garage_light
      state: 'on'

  action:
    - service: light.turn_on
      entity_id:
        - light.garage_light
      data:
       brightness_pct: 2
       transition: 330

        ##########################################################
        ## Turn On Exterior Garage Light when Garage Open
        ##########################################################

- alias: Lights - Turn On Exterior Garage Light when Garage Open
  id: 'lights_turn_on_exterior_garage_light_when_garage_open'

  trigger:
    - platform: state
      entity_id: cover.garage_door
      from: 'closed'
      to: 'open'

  condition:
    - condition: state
      entity_id: input_boolean.disable_door_open_lights_on
      state: 'off'
    - condition: state
      entity_id: sun.sun
      state: 'below_horizon'

  action:
    - service: light.turn_on
      entity_id:
        - light.garage_light
      data:
       brightness_pct: 100

        ##########################################################
        ## Turn Off Interior Garage Light when Garage Closed
        ##########################################################

- alias: Lights - Turn Off Interior Garage Light when Garage Closed
  id: 'lights_turn_off_interior_garage_light_when_garage_closed'

  trigger:
    - platform: state
      entity_id: cover.garage_door
      to: 'closed'

  condition:
    - condition: state
      entity_id: input_boolean.disable_door_open_lights_on
      state: 'off'
    - condition: state
      entity_id: light.garage_interior
      state: 'on'

  action:
    - service: light.turn_off
      entity_id:
        - light.garage_interior
      data:
       transition: 330

        ##########################################################
        ## Turn On Interior Garage Light when Garage Open
        ##########################################################

- alias: Lights - Turn On Interior Garage Light when Garage Open
  id: 'lights_turn_on_interior_garage_light_when_garage_open'

  trigger:
    - platform: state
      entity_id: cover.garage_door
      from: 'closed'
      to: 'open'
      for:
        hours: 0
        minutes: 0
        seconds: 9

  condition:
    - condition: state
      entity_id: input_boolean.disable_door_open_lights_on
      state: 'off'

  action:
    - service: light.turn_on
      entity_id:
        - light.garage_interior
      data:
       brightness_pct: 100

        ##########################################################
        ## Turn Off Exterior Garage Light After Midnight
        ##########################################################

- alias: Lights - Turn Off Exterior Garage Light After Midnight
  id: 'lights_turn_off_exterior_garage_light_after_midnight'

  trigger:
    - platform: state
      entity_id: light.garage_light
      from: 'off'
      to: 'on'
      for:
        hours: 1
        minutes: 0
        seconds: 0

  condition:
    - condition: time
      after: '00:00:00'
      before: '07:30:00'

  action:
    - service: light.turn_off
      entity_id:
        - light.garage_light
      data:
       transition: 330

        ##########################################################
        ## Turn On Exterior Garage Light at Sunset
        ##########################################################

- alias: Lights - Turn On Exterior Garage Light at Sunset
  id: 'lights_turn_on_exterior_garage_light_at_sunset'

  trigger:
    - platform: sun
      event: 'sunset'
      offset: '-00:15:00'

  condition:
    - condition: state
      entity_id: input_boolean.disable_exterior_on_sunset
      state: 'off'

  action:
    - service: light.turn_on
      entity_id:
        - light.garage_light
      data:
       brightness_pct: 2

        ##########################################################
        ## Turn Off Exterior Garage Light at Midnight
        ##########################################################

- alias: Lights - Turn Off Exterior Garage Light at Midnight
  id: 'lights_turn_off_exterior_garage_light_at_midnight'

  trigger:
   - platform: time
     at: '00:00:00'

  condition:
    - condition: state
      entity_id: sun.sun
      state: 'below_horizon'
    - condition: state
      entity_id: input_boolean.disable_exterior_off_night
      state: 'off'
    - condition: state
      entity_id: input_boolean.guest_mode
      state: 'off'

  action:
    - service: light.turn_off
      entity_id:
        - light.garage_light

        ##########################################################
        ## Turn Off Exterior Garage Light at Midnight Friends Visiting Weekdays
        ##########################################################

- alias: Lights - Turn Off Exterior Garage Light at Midnight Friends Visiting Weekdays
  id: 'lights_turn_off_exterior_garage_light_at_midnight_friends_visiting_weekdays'

  trigger:
   - platform: time
     at: '00:00:00'

  condition:
    - condition: state
      entity_id: sun.sun
      state: 'below_horizon'
    - condition: state
      entity_id: input_boolean.disable_exterior_off_night
      state: 'off'
    - condition: state
      entity_id: input_boolean.guest_mode
      state: 'on'
    - condition: time
      weekday:
        - mon
        - tue
        - wed
        - thu

  action:
    - service: light.turn_off
      entity_id:
        - light.garage_light

        ##########################################################
        ## Turn On Front Porch Lights at Sunset
        ##########################################################

- alias: Lights - Turn On Front Porch Lights at Sunset
  id: 'lights_turn_on_front_porch_lights_at_sunset'

  trigger:
    - platform: sun
      event: 'sunset'
      offset: '-00:15:00'

  condition:
    - condition: state
      entity_id: input_boolean.disable_exterior_on_sunset
      state: 'off'
    - condition: state
      entity_id: input_select.holiday
      state: 'None'

  action:
    - service: light.turn_on
      entity_id:
        - light.front_porch
      data:
        transition: 900
        brightness_pct: 50
        color_temp: 370

        ##########################################################
        ## Turn Off Front Porch Lights at Midnight
        ##########################################################

- alias: Lights - Turn Off Front Porch Lights at Midnight
  id: 'lights_turn_off_front_porch_lights_at_midnight'

  trigger:
   - platform: time
     at: '23:45:00'

  condition:
    - condition: state
      entity_id: sun.sun
      state: 'below_horizon'
    - condition: state
      entity_id: input_boolean.disable_exterior_off_night
      state: 'off'
    - condition: state
      entity_id: input_select.holiday
      state: 'None'

  action:
    - service: light.turn_off
      entity_id:
        - light.front_porch
      data:
       transition: 900
    - delay: '00:16:00'
    - service: light.turn_off
      entity_id:
        - light.front_porch

        ##########################################################
        ## Turn Off Front Porch Lights After Midnight
        ##########################################################

- alias: Lights - Turn Off Front Porch Lights After Midnight
  id: 'lights_turn_off_front_porch_lights_after_midnight'

  trigger:
    - platform: state
      entity_id: light.front_porch
      from: 'off'
      to: 'on'
      for:
        hours: 1
        minutes: 0
        seconds: 0

  condition:
    - condition: time
      after: '00:00:00'
      before: '07:30:00'
    - condition: state
      entity_id: input_boolean.disable_exterior_off_night
      state: 'off'
    - condition: state
      entity_id: group.household
      state: 'home'
    - condition: state
      entity_id: input_select.holiday
      state: 'None'

  action:
    - service: light.turn_off
      entity_id:
        - light.front_porch
      data:
       transition: 300
    - delay: '00:06:00'
    - service: light.turn_off
      entity_id:
        - light.front_porch

        ##########################################################
        ## Turn Off Front Porch Lights After 2a
        ##########################################################

- alias: Lights - Turn Off Front Porch Lights After 2a
  id: 'lights_turn_off_front_porch_lights_after_2a'

  trigger:
    - platform: state
      entity_id: light.front_porch
      from: 'off'
      to: 'on'
      for:
        hours: 1
        minutes: 0
        seconds: 0

  condition:
    - condition: time
      after: '00:00:00'
      before: '07:30:00'
    - condition: state
      entity_id: input_boolean.disable_exterior_off_night
      state: 'off'
    - condition: state
      entity_id: group.household
      state: 'home'

  action:
    - service: light.turn_off
      entity_id:
        - light.front_porch
      data:
       transition: 300
    - delay: '00:06:00'
    - service: light.turn_off
      entity_id:
        - light.front_porch

        ##########################################################
        ## Turn On Front Yard Lighting at Sunset
        ##########################################################

- alias: Lights - Turn On Front Yard Lighting at Sunset
  id: 'lights_turn_on_front_yard_lighting_at_sunset'

  trigger:
    - platform: sun
      event: 'sunset'
      offset: '-00:15:00'

  action:
    - service: switch.turn_on
      entity_id:
        - switch.front_yard_lighting

        ##########################################################
        ## Turn Off Front Yard Lighting at 3a
        ##########################################################

- alias: Lights - Turn Off Front Yard Lighting at 3a
  id: 'lights_turn_off_front_yard_lighting_at_3a'

  trigger:
   - platform: time
     at: '03:00:00'

  action:
    - service: switch.turn_off
      entity_id:
        - switch.front_yard_lighting

        ##########################################################
        ## Turn Off Front Yard Lighting after 3a
        ##########################################################

- alias: Lights - Turn Off Front Yard Lighting after 3a
  id: 'lights_turn_off_front_yard_lighting_after_3a'

  trigger:
    - platform: state
      entity_id: switch.front_yard_lighting
      from: 'off'
      to: 'on'
      for:
        hours: 1
        minutes: 0
        seconds: 0

  condition:
    - condition: time
      after: '03:00:00'
      before: '07:30:00'
    - condition: state
      entity_id: input_boolean.disable_exterior_off_night
      state: 'off'
    - condition: state
      entity_id: group.household
      state: 'home'

  action:
    - service: switch.turn_off
      entity_id:
        - switch.front_yard_lighting

        ##########################################################
        ## Turn On Back Door Lights at Sunset
        ##########################################################

- alias: Lights - Turn On Back Door Lights at Sunset
  id: 'lights_turn_on_back_door_lights_at_sunset'

  trigger:
    - platform: sun
      event: 'sunset'
      offset: '-00:15:00'

  condition:
    - condition: state
      entity_id: input_boolean.disable_exterior_on_sunset
      state: 'off'

  action:
    - service: light.turn_on
      entity_id:
        - light.back_door
      data:
        brightness_pct: 2
        transition: 60

        ##########################################################
        ## Turn Off Back Door Lights at Midnight
        ##########################################################

- alias: Lights - Turn Off Back Door Lights at Midnight
  id: 'lights_turn_off_back_door_lights_at_midnight'

  trigger:
    - platform: time
      at: '00:00:00'

  condition:
    - condition: state
      entity_id: sun.sun
      state: 'below_horizon'
    - condition: state
      entity_id: input_boolean.disable_exterior_off_night
      state: 'off'
    - condition: state
      entity_id: input_boolean.guest_mode
      state: 'off'

  action:
   - service: light.turn_off
     entity_id:
       - light.back_door
   - delay: '00:00:30'
   - service: light.turn_off
     entity_id:
       - light.back_door
       
        ##########################################################
        ## Turn Off Back Door Lights at Midnight Weekdays Friends Visiting
        ##########################################################

- alias: Lights - Turn Off Back Door Lights at Midnight Weekdays Friends Visiting
  id: 'lights_turn_off_back_door_lights_at_midnight_weekdays_friends_visiting'

  trigger:
    - platform: time
      at: '00:00:00'

  condition:
    - condition: state
      entity_id: sun.sun
      state: 'below_horizon'
    - condition: state
      entity_id: input_boolean.disable_exterior_off_night
      state: 'off'
    - condition: state
      entity_id: input_boolean.guest_mode
      state: 'on'
    - condition: time
      weekday:
        - mon
        - tue
        - wed
        - thu

  action:
   - service: light.turn_off
     entity_id:
       - light.back_door
   - delay: '00:00:30'
   - service: light.turn_off
     entity_id:
       - light.back_door

        ##########################################################
        ## Turn Off Backyard Lighting After Midnight
        ##########################################################

- alias: Lights - Turn Off Backyard Lighting After Midnight
  id: 'lights_turn_off_backyard_lighting_after_midnight'

  trigger:
    - platform: state
      entity_id: light.back_door
      from: 'off'
      to: 'on'
      for:
        hours: 1
        minutes: 0
        seconds: 0

  condition:
    - condition: time
      after: '00:00:00'
      before: '07:30:00'
    - condition: state
      entity_id: input_boolean.disable_exterior_off_night
      state: 'off'
    - condition: state
      entity_id: group.household
      state: 'home'
    - condition: state
      entity_id: input_boolean.guest_mode
      state: 'off'

  action:
    - service: light.turn_off
      entity_id:
        - light.back_door
    - service: light.turn_off
      entity_id:
        - light.backyard_deck
    - service: light.turn_off
      entity_id:
        - light.backyard_patio
    - service: switch.turn_off
      entity_id:
        - switch.lower_backyard_lighting
        - switch.backyard_patio_lighting

        ##########################################################
        ## Turn Off Interior Lights at Sunrise
        ##########################################################

- alias: Lights - Turn Off Interior Lights at Sunrise
  id: 'lights_turn_off_interior_lights_at_sunrise'

  trigger:
    - platform: sun
      event: 'sunrise'
      offset: '+00:45:00'

  condition:
    - condition: state
      entity_id: binary_sensor.motion
      state: 'off'
    - condition: not
      conditions:
      - condition: state
        entity_id: person.USER2
        state: 'home'
    - condition: state
      entity_id: input_boolean.guest_mode
      state: 'off'

  action:
    - service: light.turn_off
      entity_id:
        - light.interior_lights

        ##########################################################
        ## Turn Off Exterior Lights at Sunrise
        ##########################################################

- alias: Lights - Turn Off Exterior Lights at Sunrise
  id: 'lights_turn_off_exterior_lights_at_sunrise'

  trigger:
    - platform: sun
      event: 'sunrise'
      offset: '+00:15:00'

  action:
    - service: light.turn_off
      entity_id:
        - light.exterior_lights
    - service: switch.turn_off
      entity_id:
        - switch.lower_backyard_lighting
        - switch.backyard_patio_lighting
        - switch.front_yard_lighting
    - delay: '00:02:00'
    - service: light.turn_off
      entity_id:
        - light.front_porch
    - service: light.turn_off
      entity_id:
        - light.back_door
    - service: light.turn_off
      entity_id:
        - light.backyard_deck
    - service: light.turn_off
      entity_id:
        - light.backyard_patio

        ##########################################################
        ## Turn On Backyard Lighting at Sunset
        ##########################################################

- alias: Lights - Turn On Backyard Lighting at Sunset
  id: 'lights_turn_on_backyard_lighting_at_sunset'

  trigger:
    - platform: sun
      event: 'sunset'
      offset: '-00:15:00'

  condition:
    - condition: state
      entity_id: input_boolean.disable_exterior_on_sunset
      state: 'off'
    - condition: state
      entity_id: input_boolean.vacation_mode
      state: 'off'
    - condition: state
      entity_id: group.household
      state: 'home'

  action:
    - service: switch.turn_on
      entity_id:
        - switch.backyard_patio_lighting
        - switch.lower_backyard_lighting
    - service: light.turn_on
      entity_id:
        - light.backyard_patio
      data:
        brightness_pct: 10
        color_temp: 370
    - service: light.turn_on
      entity_id:
        - light.backyard_deck
      data:
        brightness_pct: 2

        ##########################################################
        ## Turn Off Backyard Lighting at Midnight
        ##########################################################

- alias: Lights - Turn Off Backyard Lighting at Midnight
  id: 'lights_turn_off_backyard_lighting_at_midnight'

  trigger:
    - platform: time
      at: '00:00:00'

  condition:
    - condition: state
      entity_id: input_boolean.disable_exterior_off_night
      state: 'off'
    - condition: state
      entity_id: input_boolean.guest_mode
      state: 'off'

  action:
    - service: switch.turn_off
      entity_id:
        - switch.lower_backyard_lighting
        - switch.backyard_patio_lighting
    - service: light.turn_off
      entity_id:
        - light.backyard_patio
    - service: light.turn_off
      entity_id:
        - light.backyard_deck
    - delay: '00:00:30'
    - service: light.turn_off
      entity_id:
        - light.backyard_deck

        ##########################################################
        ## Turn Off Backyard Lighting At Midnight Weekedays Friends Visiting
        ##########################################################

- alias: Lights - Turn Off Backyard Lighting At Midnight Weekedays Friends Visiting
  id: 'lights_turn_off_backyard_lighting_at_midnight_weekdays_friends_visiting'

  trigger:
    - platform: time
      at: '00:00:00'

  condition:
    - condition: state
      entity_id: input_boolean.disable_exterior_off_night
      state: 'off'
    - condition: state
      entity_id: input_boolean.guest_mode
      state: 'on'
    - condition: time
      weekday:
        - mon
        - tue
        - wed
        - thu

  action:
    - service: switch.turn_off
      entity_id:
        - switch.lower_backyard_lighting
        - switch.backyard_patio_lighting
    - service: light.turn_off
      entity_id:
        - light.backyard_patio
    - service: light.turn_off
      entity_id:
        - light.backyard_deck
    - delay: '00:00:30'
    - service: light.turn_off
      entity_id:
        - light.backyard_deck
   
        ##########################################################
        ## Turn On Guest Bedroom Lamp when Ceiling is On
        ##########################################################

- alias: Lights - Turn On Guest Bedroom Lamp when Ceiling is On
  id: 'lights_turn_on_guest_bedroom_lamp_when_ceiling_is_on'

  trigger:
    - platform: state
      entity_id: light.guest_bedroom_ceiling
      from: 'off'
      to: 'on'

  condition:
    - condition: state
      entity_id: light.guest_bedroom_nightstand
      state: 'off'

  action:
    - service: light.turn_on
      entity_id:
        - light.guest_bedroom_nightstand
      data:
       brightness_pct: 50

        ##########################################################
        ## Turn Off Guest Bedroom Lamp when Ceiling is Off
        ##########################################################

- alias: Lights - Turn Off Guest Bedroom Lamp when Ceiling is Off
  id: 'lights_turn_off_guest_bedroom_lamp_when_ceiling_is_off'

  trigger:
    - platform: state
      entity_id: light.guest_bedroom_ceiling
      from: 'on'
      to: 'off'

  condition:
    - condition: state
      entity_id: light.guest_bedroom_nightstand
      state: 'on'

  action:
    - service: light.turn_off
      entity_id:
        - light.guest_bedroom_nightstand

        ##########################################################
        ## Turn On Basement Lights when Workbench Switch Used
        ##########################################################

- alias: Lights - Turn On Basement Lights when Workbench Switch Used
  id: 'lights_turn_on_basement_lights_when_workbench_switch_used'

  trigger:
    - platform: state
      entity_id: light.work_bench_light
      from: 'off'
      to: 'on'

  action:
    - service: light.turn_on
      entity_id:
        - light.basement_lights
      data:
       brightness_pct: 100
    - service: light.turn_on
      entity_id:
        - light.laundry_room_light
    - service: light.turn_on
      entity_id:
        - light.basement_stairs
      data:
       brightness_pct: 100
    - service: light.turn_on
      entity_id:
        - light.basement_lamp
      data:
       brightness_pct: 100

        ##########################################################
        ## Turn On Basement Lights when Laundry Room Switch Used
        ##########################################################

- alias: Lights - Turn On Basement Lights when Laundry Room Switch Used
  id: 'lights_turn_on_basement_lights_when_laundry_room_switch_used'

  trigger:
    - platform: state
      entity_id: light.laundry_room_light
      from: 'off'
      to: 'on'

  action:
    - service: light.turn_on
      entity_id:
        - light.basement_lights
      data:
       brightness_pct: 100
    - service: light.turn_on
      entity_id:
        - light.basement_stairs
      data:
       brightness_pct: 100
    - service: light.turn_on
      entity_id:
        - light.basement_lamp
      data:
       brightness_pct: 100
    - service: light.turn_on
      entity_id:
        - light.work_bench_light
      data:
       brightness_pct: 25

        ##########################################################
        ## Turn Off Basement Lights when Laundry Switch Used
        ##########################################################

- alias: Lights - Turn Off Basement Lights when Laundry Switch Used
  id: 'lights_turn_off_basement_lights_when_laundry_switch_used'

  trigger:
    - platform: state
      entity_id: light.laundry_room_light
      from: 'on'
      to: 'off'

  condition:
    - condition: state
      entity_id: group.household
      state: 'home'
    - condition: state
      entity_id: light.basement_lighting
      state: 'on'

  action:
    - service: light.turn_off
      entity_id:
        - light.basement_stairs
    - service: light.turn_off
      entity_id:
        - light.basement_lights
    - service: light.turn_off
      entity_id:
        - light.basement_lamp
    - service: light.turn_off
      entity_id:
        - light.work_bench_light

        ##########################################################
        ## Turn Off Basement Lights when Work Bench Switch Used
        ##########################################################

- alias: Lights - Turn Off Basement Lights when Work Bench Switch Used
  id: 'lights_turn_off_basement_lights_when_work_bench_switch_used'

  trigger:
    - platform: state
      entity_id: light.work_bench_light
      from: 'on'
      to: 'off'

  condition:
    - condition: state
      entity_id: group.household
      state: 'home'
    - condition: state
      entity_id: light.basement_lighting
      state: 'on'

  action:
    - service: light.turn_off
      entity_id:
        - light.basement_stairs
    - service: light.turn_off
      entity_id:
        - light.basement_lights
    - service: light.turn_off
      entity_id:
        - light.laundry_room_light
    - service: light.turn_off
      entity_id:
        - light.basement_lamp

#################################################################
## Color Modes
#################################################################

        ##########################################################
        ## Media Center Lighting Random Color Every 30 mins
        ##########################################################

- alias: Lights - Media Center Lighting Random Color Every 30 Mins
  id: 'lights_media_center_lighting_random_color_every_30_mins'

  trigger:
    - platform: time_pattern
      minutes: '/30'

  condition:
    - condition: state
      entity_id: light.media_center_lighting
      state: 'on'
    - condition: state
      entity_id: input_boolean.livingroom_rainbow
      state: 'off'
    - condition: state
      entity_id: input_boolean.interior_holiday
      state: 'off'
    - condition: state
      entity_id: group.household
      state: 'home'

  action:
    - service: light.turn_on
      target:
        entity_id: light.media_center_lighting
      data:
        transition: 300
        hs_color:
          - '{{ (range(0, 360)|random) }}'
          - '100'
        brightness_pct: 100

        ##########################################################
        ## Living Room Lights Random Color On
        ##########################################################

- alias: Lights - Living Room Lights Random Color On
  id: 'lights_living_room_lights_random_color_on'

  trigger:
    - platform: time_pattern
      seconds: '/15'

  condition:
    - condition: state
      entity_id: input_boolean.livingroom_rainbow
      state: 'on'
    - condition: state
      entity_id: group.household
      state: 'home'
    - condition: state
      entity_id: input_boolean.bedtime
      state: 'off'

  action:
    - service: light.turn_off
      entity_id:
        - light.living_room_fan_lights
    - service: light.turn_on
      target:
        entity_id: light.living_room_lamp_1
      data:
        transition: 5
        hs_color:
          - '{{ (range(0, 360)|random) }}'
          - '100'
        brightness_pct: 100
    - service: light.turn_on
      target:
        entity_id: light.media_center_lighting
      data:
        transition: 5
        hs_color:
          - '{{ (range(0, 360)|random) }}'
          - '100'
        brightness_pct: 100
    - service: light.turn_on
      target:
        entity_id: light.globe
      data:
        transition: 5
        hs_color:
          - '{{ (range(0, 360)|random) }}'
          - '100'
        brightness_pct: 100
    - service: light.turn_on
      target:
        entity_id: light.living_room_lamp_2
      data:
        transition: 5
        hs_color:
          - '{{ (range(0, 360)|random) }}'
          - '100'
        brightness_pct: 100

        ##########################################################
        ## Living Room Lights Random Color Off
        ##########################################################

- alias: Lights - Living Room Lights Random Color Off
  id: 'lights_living_room_lights_random_color_off'

  trigger:
    - platform: state
      entity_id: input_boolean.livingroom_rainbow
      to: 'off'

  condition:
    - condition: state
      entity_id: group.household
      state: 'home'
    - condition: state
      entity_id: input_boolean.bedtime
      state: 'off'
    - condition: state
      entity_id: light.living_room_lights
      state: 'on'

  action:
    - service: light.turn_on
      entity_id:
        - light.living_room_accent_lights
    - delay: '00:00:05'
    - service: light.turn_on
      entity_id:
        - light.living_room_lamps
      data:
        transition: 15
        brightness_pct: 100
        color_temp: 370
    - service: light.turn_on
      entity_id: light.media_center_lighting
      data:
        transition: 15
        brightness_pct: 100
    - service: light.turn_on
      entity_id:
        - light.globe
      data:
        transition: 15
        brightness_pct: 65
        color_temp: 366

        ##########################################################
        ## Bedroom Lights Random Color On
        ##########################################################

- alias: Lights - Bedroom Lights Random Color On
  id: 'lights_bedroom_lights_random_color_on'

  trigger:
    - platform: time_pattern
      seconds: '/15'

  condition:
    - condition: state
      entity_id: input_boolean.bedroom_rainbow
      state: 'on'
    - condition: state
      entity_id: group.household
      state: 'home'
    - condition: state
      entity_id: input_boolean.bedtime
      state: 'off'

  action:
    - service: light.turn_off
      entity_id:
        - light.bedroom_closet_ceiling
    - service: light.turn_on
      data:
        brightness_pct: 100
        effect: Party
      target:
        entity_id: 
          - light.USER1s_nightstand
          - light.USER2s_nightstand
          - light.closet_lamp
    - service: light.turn_on
      target:
        entity_id: light.bedroom_lamp
      data:
        transition: 5
        hs_color:
          - '{{ (range(0, 360)|random) }}'
          - '100'
        brightness_pct: 100

        ##########################################################
        ## Bedroom Lights Random Color Off
        ##########################################################

- alias: Lights - Bedroom Lights Random Color Off
  id: 'lights_bedroom_lights_random_color_off'

  trigger:
    - platform: state
      entity_id: input_boolean.bedroom_rainbow
      to: 'off'

  condition:
    - condition: state
      entity_id: group.household
      state: 'home'
    - condition: state
      entity_id: input_boolean.bedtime
      state: 'off'
    - condition: state
      entity_id: light.bedroom_lights
      state: 'on'

  action:
    - service: light.turn_on
      entity_id:
        - light.USER1s_nightstand
        - light.USER2s_nightstand
        - light.bedroom_lamp
    - delay: '00:00:05'
    - service: light.turn_on
      entity_id:
        - light.USER1s_nightstand
        - light.USER2s_nightstand
        - light.bedroom_lamp
        - light.closet_lamp
      data:
        transition: 15
        color_temp: 370
        brightness_pct: 50

        ##########################################################
        ## USER1's Office Lights Lamps Random Color On
        ##########################################################

- alias: Lights - USER1 Office Lights Random Color On
  id: 'lights_USER1_office_lights_random_color_on'

  trigger:
    - platform: state
      entity_id: input_boolean.office_rainbow
      to: 'on'

  condition:
    - condition: state
      entity_id: input_boolean.office_rainbow
      state: 'on'
    - condition: state
      entity_id: group.household
      state: 'home'
    - condition: state
      entity_id: input_boolean.bedtime
      state: 'off'

  action:
    - service: light.turn_on
      data:
        brightness_pct: 100
        effect: Party
      target:
        entity_id: 
          - light.USER1_office_desk_lamp
          - light.moon_globe
    - service: light.turn_off
      entity_id:
        - light.USER1_s_office_ceiling

        ##########################################################
        ## USER1's Office Lamp Random Color
        ##########################################################

- alias: Lights - USER1's Office Lamp Random Color
  id: 'lights_USER1_office_lamp_random_color'

  trigger:
    - platform: time_pattern
      seconds: '/15'

  condition:
    - condition: state
      entity_id: input_boolean.office_rainbow
      state: 'on'
    - condition: state
      entity_id: group.household
      state: 'home'
    - condition: state
      entity_id: input_boolean.bedtime
      state: 'off'

  action:
    - service: light.turn_on
      target:
        entity_id: 
          - light.office_lamp
          - light.USER1_office_desk_accent
      data:
        transition: 5
        hs_color:
          - '{{ (range(0, 360)|random) }}'
          - '100'
        brightness_pct: 100

        ##########################################################
        ## USER1 Office Random Color Off
        ##########################################################

- alias: Lights - USER1 Office Random Color Off
  id: 'lights_USER1_office_random_color_off'

  trigger:
    - platform: state
      entity_id: input_boolean.office_rainbow
      to: 'off'

  condition:
    - condition: state
      entity_id: group.household
      state: 'home'
    - condition: state
      entity_id: input_boolean.bedtime
      state: 'off'
    - condition: state
      entity_id: light.office_lamp
      state: 'on'
    - condition: state
      entity_id: light.moon_globe
      state: 'on'

  action:
    - service: light.turn_on
      entity_id: light.office_lamp
      data:
        transition: 5
        color_temp: 370
        brightness_pct: 100
    - service: light.turn_on
      entity_id:
        - light.moon_globe
      data:
        brightness_pct: 10
        color_temp: 238
    - service: light.turn_on
      entity_id:
        - light.USER1_office_desk_lamp
      data:
        brightness_pct: 25
        color_temp: 370
    - service: light.turn_on
      entity_id:
        - light.USER1_office_desk_accent
      data:
        brightness_pct: 80
        color_temp: 370

        ##########################################################
        ## Front Porch Lights Random Color On
        ##########################################################

- alias: Lights - Front Porch Lights Random Color On
  id: 'lights_front_porch_lights_random_color_on'

  trigger:
    - platform: time_pattern
      seconds: '/15'

  condition:
    - condition: state
      entity_id: input_boolean.front_porch_rainbow
      state: 'on'
    - condition: state
      entity_id: group.household
      state: 'home'
    - condition: state
      entity_id: input_boolean.bedtime
      state: 'off'

  action:
    - service: light.turn_on
      target:
        entity_id: light.front_porch_left
      data:
        transition: 5
        hs_color:
          - '{{ (range(0, 360)|random) }}'
          - '100'
        brightness_pct: 100
    - service: light.turn_on
      target:
        entity_id: light.front_porch_right
      data:
        transition: 5
        hs_color:
          - '{{ (range(0, 360)|random) }}'
          - '100'
        brightness_pct: 100

        ##########################################################
        ## Front Porch Lights Random Color Off
        ##########################################################

- alias: Lights - Front Porch Lights Random Color Off
  id: 'lights_front_porch_lights_random_color_off'

  trigger:
    - platform: state
      entity_id: input_boolean.front_porch_rainbow
      to: 'off'

  condition:
    - condition: state
      entity_id: light.front_porch
      state: 'on'

  action:
    - service: light.turn_on
      entity_id: light.front_porch
    - delay: '00:00:01'
    - service: light.turn_on
      entity_id: light.front_porch
      data:
        transition: 15
        brightness_pct: 50
        color_temp: 370

        ##########################################################
        ## USER1's Office Desk Lamp Do Not Disturb On
        ##########################################################

- alias: Lights - USER1 Office Desk Lamp Do Not Disturb On
  id: 'lights_USER1_office_desk_lamp_do_not_disturb_on'

  trigger:
    - platform: state
      entity_id: input_boolean.USER1_s_office_do_not_disturb
      to: 'on'

  condition:
    - condition: state
      entity_id: person.USER1
      state: 'home'

  action:
    - service: light.turn_on
      entity_id:
        - light.USER1_office_desk_lamp
      data:
        brightness_pct: 50
        color_name: red

        ##########################################################
        ## USER1's Office Accent Light Do Not Disturb On
        ##########################################################

- alias: Lights - USER1's Office Accent Light Do Not Disturb On
  id: 'lights_USER1_office_accent_light_do_not_disturb_on'

  trigger:
    - platform: state
      entity_id: input_boolean.USER1_s_office_do_not_disturb
      to: 'on'

  condition:
    - condition: state
      entity_id: person.USER1
      state: 'home'
    - condition: state
      entity_id: cover.USER1_s_office_blinds
      state: 'closed'

  action:
    - service: light.turn_on
      entity_id:
        - light.USER1_office_desk_accent
      data:
        brightness_pct: 100
        color_name: red

        ##########################################################
        ## USER1's Office Desk Lamp Do Not Disturb Off Daytime Blinds Open
        ##########################################################

- alias: Lights - USER1 Office Desk Lamp Do Not Disturb Off Daytime Blinds Open
  id: 'lights_USER1_office_desk_lamp_do_not_disturb_off_daytime_blinds_open'

  trigger:
    - platform: state
      entity_id: input_boolean.USER1_s_office_do_not_disturb
      to: 'off'

  condition:
    - condition: state
      entity_id: person.USER1
      state: 'home'
    - condition: state
      entity_id: sun.sun
      state: 'above_horizon'
    - condition: state
      entity_id: light.USER1_office_desk_lamp
      state: 'on'
    - condition: or
      conditions:
      - condition: state
        entity_id: cover.USER1_s_office_blinds
        state: 'open'
      - condition: state
        entity_id: cover.USER1_s_office_blinds
        state: 'opening'

  action:
    - service: light.turn_on
      entity_id:
        - light.USER1_office_desk_lamp
      data:
        brightness_pct: 25
        color_temp: 370
    - delay: '00:00:05'
    - service: light.turn_off
      entity_id:
        - light.USER1_office_desk_lamp

        ##########################################################
        ## USER1's Office Desk Lamp Do Not Disturb Off Daytime Blinds Closed
        ##########################################################

- alias: Lights - USER1 Office Desk Lamp Do Not Disturb Off Daytime Blinds Closed
  id: 'lights_USER1_office_desk_lamp_do_not_disturb_off_daytime_blinds_closed'

  trigger:
    - platform: state
      entity_id: input_boolean.USER1_s_office_do_not_disturb
      to: 'off'

  condition:
    - condition: state
      entity_id: person.USER1
      state: 'home'
    - condition: state
      entity_id: sun.sun
      state: 'above_horizon'
    - condition: state
      entity_id: light.USER1_office_desk_lamp
      state: 'on'
    - condition: or
      conditions:
      - condition: state
        entity_id: cover.USER1_s_office_blinds
        state: 'closed'
      - condition: state
        entity_id: cover.USER1_s_office_blinds
        state: 'closing'

  action:
    - service: light.turn_on
      entity_id:
        - light.USER1_office_desk_lamp
      data:
        brightness_pct: 25
        color_temp: 370

        ##########################################################
        ## USER1's Office Accent Light Do Not Disturb Off Daytime Blinds Closed
        ##########################################################

- alias: Lights - USER1's Office Accent Light Do Not Disturb Off Daytime Blinds Closed
  id: 'lights_USER1_office_accent_light_do_not_disturb_off_daytime_blinds_closed'

  trigger:
    - platform: state
      entity_id: input_boolean.USER1_s_office_do_not_disturb
      to: 'off'

  condition:
    - condition: state
      entity_id: person.USER1
      state: 'home'
    - condition: state
      entity_id: sun.sun
      state: 'above_horizon'
    - condition: state
      entity_id: light.USER1_office_desk_accent
      state: 'on'
    - condition: or
      conditions:
      - condition: state
        entity_id: cover.USER1_s_office_blinds
        state: 'closed'
      - condition: state
        entity_id: cover.USER1_s_office_blinds
        state: 'closing'

  action:
    - service: light.turn_on
      entity_id:
        - light.USER1_office_desk_accent
      data:
        brightness_pct: 80
        color_temp: 370

        ##########################################################
        ## USER1's Office Desk Lamp Do Not Disturb Off Night
        ##########################################################

- alias: Lights - USER1 Office Desk Lamp Do Not Disturb Off Night
  id: 'lights_USER1_office_desk_lamp_do_not_disturb_off_night'

  trigger:
    - platform: state
      entity_id: input_boolean.USER1_s_office_do_not_disturb
      to: 'off'

  condition:
    - condition: state
      entity_id: person.USER1
      state: 'home'
    - condition: state
      entity_id: sun.sun
      state: 'below_horizon'
    - condition: state
      entity_id: light.USER1_office_desk_lamp
      state: 'on'

  action:
    - service: light.turn_on
      entity_id:
        - light.USER1_office_desk_lamp
      data:
        brightness_pct: 25
        color_temp: 370

        ##########################################################
        ## USER1's Office Accent Light Do Not Disturb Off Night
        ##########################################################

- alias: Lights - USER1's Office Accent Light Do Not Disturb Off Night
  id: 'lights_USER1_office_accent_light_do_not_disturb_off_night'

  trigger:
    - platform: state
      entity_id: input_boolean.USER1_s_office_do_not_disturb
      to: 'off'

  condition:
    - condition: state
      entity_id: person.USER1
      state: 'home'
    - condition: state
      entity_id: sun.sun
      state: 'below_horizon'
    - condition: state
      entity_id: light.USER1_office_desk_accent
      state: 'on'

  action:
    - service: light.turn_on
      entity_id:
        - light.USER1_office_desk_accent
      data:
        brightness_pct: 80
        color_temp: 370

#################################################################
## Default Colors Temps
#################################################################

        ##########################################################
        ## Set Default Color Temp 370
        ##########################################################

- alias: Lights - Set Default Color Temp 370
  id: 'lights_set_default_color_temp_370'
  
  mode: parallel
  trigger:
    - platform: state
      entity_id:
        - light.globe
        - light.USER1s_nightstand
        - light.USER2s_nightstand
        - light.bedroom_lamp
        - light.closet_lamp
        - light.office_lamp
        - light.USER1_office_desk_lamp
        - light.USER1_office_desk_accent
        - light.living_room_lamps
      from: 'off'
      to: 'on'
      for:
        hours: 0
        minutes: 0
        seconds: 6

  condition:
    - condition: state
      entity_id: alarm_control_panel.alarm
      state: 'disarmed'
    - condition: state
      entity_id: input_boolean.livingroom_rainbow
      state: 'off'
    - condition: state
      entity_id: input_boolean.bedroom_rainbow
      state: 'off'
    - condition: state
      entity_id: input_boolean.office_rainbow
      state: 'off'
    - condition: state
      entity_id: input_boolean.interior_holiday
      state: 'off'
    - condition: state
      entity_id: input_boolean.USER1_s_office_do_not_disturb
      state: 'off'
    - condition: or
      conditions:
      - condition: state
        entity_id: binary_sensor.basement_drain_water_sensor_liquid_detected
        state: 'off'
      - condition: state
        entity_id: binary_sensor.kitchen_sink_water_sensor
        state: 'off'
      - condition: state
        entity_id: binary_sensor.bathroom_sink_water_sensor
        state: 'off'
      - condition: state
        entity_id: binary_sensor.upstairs_bathrooom_water_sensor
        state: 'off'
      - condition: state
        entity_id: binary_sensor.utility_sink_water_sensor
        state: 'off'
      - condition: state
        entity_id: binary_sensor.washing_machine_water_sensor
        state: 'off'

  action:
    - service: light.turn_on
      target:
        entity_id: "{{ trigger.entity_id }}"
      data:
        color_temp: 370

#################################################################
## Grow Light
#################################################################

        ##########################################################
        ## Turn Off Grow Light After 16 Hours
        ##########################################################

- alias: Lights - Turn Off Grow Light After 16 Hours
  id: 'lights_turn_off_grow_light_after_16_hours'

  trigger:
    - platform: sun
      event: 'sunrise'
      offset: '+16:00:00'

  condition:
    - condition: state
      entity_id: switch.grow_light
      state: 'on'

  action:
    - service: switch.turn_off
      entity_id:
        - switch.grow_light

        ##########################################################
        ## Turn On Grow Light at Sunrise
        ##########################################################

- alias: Lights - Turn On Grow Light at Sunrise
  id: 'lights_turn_on_grow_light_at_sunrise'

  trigger:
    - platform: sun
      event: 'sunrise'

  condition:
    - condition: state
      entity_id: switch.grow_light
      state: 'off'

  action:
    - service: switch.turn_on
      entity_id:
        - switch.grow_light

#################################################################
## Pico Remotes
#################################################################

  #################################################################
  ## Living Room Lights On Pico Remote
  #################################################################

- alias: Lights - Living Room Lights On Pico Remote
  id: 'lights_living_room_lights_on_pico_remote'

  trigger:
    - platform: event
      event_type: lutron_caseta_button_event
      event_data:
        serial: 43846935
        button_number: 2
        action: press

  action:
    - service: light.turn_on
      entity_id:
        - light.living_room_lamps
      data:
        brightness_pct: 100
        color_temp: 370
    - service: light.turn_on
      entity_id: 
        - light.media_center_lighting
      data:
       brightness_pct: 100
    - service: light.turn_on
      entity_id:
        - light.globe
      data:
        brightness_pct: 65
    - delay:
        seconds: 1

  #################################################################
  ## Living Room Lights Off Pico Remote
  #################################################################

- alias: Lights - Living Room Lights Off Pico Remote
  id: 'lights_living_room_lights_off_pico_remote'

  trigger:
    - platform: event
      event_type: lutron_caseta_button_event
      event_data:
        serial: 43846935
        button_number: 4
        action: press

  action:
    - service: light.turn_off
      entity_id:
        - light.living_room_accent_lights
    - delay:
        seconds: 1

  #################################################################
  ## Living Room Lights Increase Brightness Pico Remote
  #################################################################

- alias: Lights - Living Room Lights Increase Brightness Pico Remote
  id: 'lights_living_room_lights_increase_brightness_pico_remote'

  trigger:
    - platform: event
      event_type: lutron_caseta_button_event
      event_data:
        serial: 43846935
        button_number: 5
        action: press

  action:
    - service: light.turn_on
      entity_id:
        - light.living_room_accent_lights
      data:
        brightness_step_pct: 10
    - delay:
        seconds: 1

  #################################################################
  ## Living Room Lights Decrease Brightness Pico Remote
  #################################################################

- alias: Lights - Living Room Lights Decrease Brightness Pico Remote
  id: 'lights_living_room_lights_decrease_brightness_pico_remote'

  trigger:
    - platform: event
      event_type: lutron_caseta_button_event
      event_data:
        serial: 43846935
        button_number: 6
        action: press

  condition:
    - condition: state
      entity_id: light.living_room_accent_lights
      state: 'on'

  action:
    - service: light.turn_on
      entity_id:
        - light.living_room_accent_lights
      data:
        brightness_step_pct: -10
    - delay:
        seconds: 1
        
  #################################################################
  ## Living Room Fan Lights On Pico Remote
  #################################################################

- alias: Lights - Living Room Fan Lights On Pico Remote
  id: 'lights_living_room_fan_lights_on_pico_remote'

  trigger:
    - platform: event
      event_type: lutron_caseta_button_event
      event_data:
        serial: 49229391
        button_number: 2
        action: press

  condition:
    - condition: state
      entity_id: light.living_room_fan_lights
      state: 'off'

  action:
    - service: light.turn_on
      entity_id:
        - light.living_room_fan_lights
    - delay:
        seconds: 1

  #################################################################
  ## Living Room Fan Dimm Lights Pico Remote
  #################################################################

- alias: Lights - Living Room Fan Dimm Lights Pico Remote
  id: 'lights_living_room_fan_dimm)lights_pico_remote'

  trigger:
    - platform: event
      event_type: lutron_caseta_button_event
      event_data:
        serial: 49229391
        button_number: 2
        action: press

  condition:
    - condition: state
      entity_id: light.living_room_fan_lights
      state: 'on'

  action:
    - service: script.turn_on
      entity_id:
        - script.living_room_fan_light_dimmer
    - delay:
        seconds: 3

  #################################################################
  ## Living Room Fan Lights Start Dimmer Reset
  #################################################################

- alias: Lights - Living Room Fan Lights Start Dimmer Reset
  id: 'lights_living_room_fan_lights_start_dimmer_reset'

  trigger:
    - platform: state
      entity_id: switch.living_room_east_fan_dimmer
      to: 'on'
      for:
        hours: 0
        minutes: 0
        seconds: 10
    - platform: state
      entity_id: switch.living_room_east_fan_dimmer
      to: 'on'
      for:
        hours: 0
        minutes: 0
        seconds: 10

  action:
    - service: switch.turn_off
      entity_id:
        - switch.living_room_east_fan_dimmer
        - switch.living_room_east_fan_dimmer

  #################################################################
  ## Living Room Fan Lights Off Pico Remote
  #################################################################

- alias: Lights - Living Room Fan Lights Off Pico Remote
  id: 'lights_living_room_fan_lights_off_pico_remote'

  trigger:
    - platform: event
      event_type: lutron_caseta_button_event
      event_data:
        serial: 49229391
        button_number: 4
        action: press

  condition:
    - condition: state
      entity_id: light.living_room_fan_lights
      state: 'on'

  action:
    - service: light.turn_off
      entity_id:
        - light.living_room_fan_lights
    - delay:
        seconds: 1

  #################################################################
  ## Living Room West Fan Lights On Pico Remote
  #################################################################

- alias: Lights - Living Room West Fan Lights On Pico Remote
  id: 'lights_living_room_west_fan_lights_on_pico_remote'

  trigger:
    - platform: event
      event_type: lutron_caseta_button_event
      event_data:
        serial: 48491915
        button_number: 2
        action: press

  condition:
    - condition: state
      entity_id: light.living_room_ceiling_west
      state: 'off'

  action:
    - service: light.turn_on
      entity_id:
        - light.living_room_ceiling_west
    - delay:
        seconds: 1

  #################################################################
  ## Living Room West Fan Dimm Lights Pico Remote
  #################################################################

- alias: Lights - Living Room West Fan Dimm Lights Pico Remote
  id: 'lights_living_room_west_fan_dimm_lights_pico_remote'

  trigger:
    - platform: event
      event_type: lutron_caseta_button_event
      event_data:
        serial: 48491915
        button_number: 2
        action: press

  condition:
    - condition: state
      entity_id: light.living_room_ceiling_west
      state: 'on'

  action:
    - service: script.turn_on
      entity_id:
        - script.living_room_west_fan_light_dimmer
    - delay:
        seconds: 3

  #################################################################
  ## Living Room West Fan Lights Start Dimmer Reset
  #################################################################

- alias: Lights - Living Room West Fan Lights Start Dimmer Reset
  id: 'lights_living_room_west_fan_lights_start_dimmer_reset'

  trigger:
    - platform: state
      entity_id: switch.living_room_east_fan_dimmer
      to: 'on'
      for:
        hours: 0
        minutes: 0
        seconds: 10
    - platform: state
      entity_id: switch.living_room_east_fan_dimmer
      to: 'on'
      for:
        hours: 0
        minutes: 0
        seconds: 10

  action:
    - service: switch.turn_off
      entity_id:
        - switch.living_room_east_fan_dimmer

  #################################################################
  ## Living Room West Fan Lights Off Pico Remote
  #################################################################

- alias: Lights - Living Room West Fan Lights Off Pico Remote
  id: 'lights_living_room_west_fan_lights_off_pico_remote'

  trigger:
    - platform: event
      event_type: lutron_caseta_button_event
      event_data:
        serial: 48491915
        button_number: 4
        action: press

  condition:
    - condition: state
      entity_id: light.living_room_ceiling_west
      state: 'on'

  action:
    - service: light.turn_off
      entity_id:
        - light.living_room_ceiling_west
    - delay:
        seconds: 1

  #################################################################
  ## Basement Lights On Pico Remote
  #################################################################

- alias: Lights - Basement Lights On Pico Remote
  id: 'lights_basement_lights_on_pico_remote'

  trigger:
    - platform: event
      event_type: lutron_caseta_button_event
      event_data:
        serial: 42010030
        button_number: 2
        action: press

  action:
    - service: light.turn_on
      entity_id:
        - light.basement_stairs
      data:
        brightness_pct: 100
    - service: light.turn_on
      entity_id:
        - light.basement_lights
      data:
        brightness_pct: 100
    - service: light.turn_on
      entity_id:
        - light.work_bench_light
      data:
        brightness_pct: 100
    - service: light.turn_on
      entity_id:
        - light.laundry_room_light
    - service: light.turn_on
      entity_id:
        - light.basement_lamp
      data:
        brightness_pct: 100
    - delay:
        seconds: 1

  #################################################################
  ## Basement Lights Off Pico Remote
  #################################################################

- alias: Lights - Basement Lights Off Pico Remote
  id: 'lights_basement_lights_off_pico_remote'

  trigger:
    - platform: event
      event_type: lutron_caseta_button_event
      event_data:
        serial: 42010030
        button_number: 4
        action: press

  action:
    - service: light.turn_off
      entity_id:
        - light.basement_lighting
    - delay:
        seconds: 1

  #################################################################
  ## Basement Lights Increase Brightness Pico Remote
  #################################################################

- alias: Lights - Basement Lights Increase Brightness Pico Remote
  id: 'lights_basement_lights_increase_brightness_pico_remote'

  trigger:
    - platform: event
      event_type: lutron_caseta_button_event
      event_data:
        serial: 42010030
        button_number: 5
        action: press

  action:
    - service: light.turn_on
      entity_id:
        - light.basement_stairs
      data:
        brightness_step_pct: 10
    - service: light.turn_on
      entity_id:
        - light.basement_lights
      data:
        brightness_step_pct: 10
    - service: light.turn_on
      entity_id:
        - light.work_bench_light
      data:
        brightness_step_pct: 10
    - delay:
        seconds: 1

  #################################################################
  ## Basement Lights Decrease Brightness Pico Remote
  #################################################################

- alias: Lights - Basement Lights Decrease Brightness Pico Remote
  id: 'lights_basement_lights_decrease_brightness_pico_remote'

  trigger:
    - platform: event
      event_type: lutron_caseta_button_event
      event_data:
        serial: 42010030
        button_number: 6
        action: press
    
  condition:
    - condition: or
      conditions:
      - condition: state
        entity_id: light.basement_stairs
        state: 'on'
      - condition: state
        entity_id: light.basement_lights
        state: 'on'
      - condition: state
        entity_id: light.work_bench_light
        state: 'on'

  action:
    - service: light.turn_on
      entity_id:
        - light.basement_stairs
      data:
        brightness_step_pct: -10
    - service: light.turn_on
      entity_id:
        - light.basement_lights
      data:
        brightness_step_pct: -10
    - service: light.turn_on
      entity_id:
        - light.work_bench_light
      data:
        brightness_step_pct: -10
    - delay:
        seconds: 1

  #################################################################
  ## Basement Lights On Center Pico Button
  #################################################################

- alias: Lights - Basement Lights On Center Pico Button
  id: 'lights_basement_lights_on_center_pico_button'

  trigger:
    - platform: event
      event_type: lutron_caseta_button_event
      event_data:
        serial: 42010030
        button_number: 3
        action: press

  condition:
    - condition: or
      conditions:
      - condition: state
        entity_id: light.basement_stairs
        state: 'off'
      - condition: state
        entity_id: light.basement_lights
        state: 'off'
      - condition: state
        entity_id: light.work_bench_light
        state: 'off'

  action:
    - service: light.turn_on
      entity_id:
        - light.basement_stairs
    - service: light.turn_on
      entity_id:
        - light.basement_lights
    - service: light.turn_on
      entity_id:
        - light.work_bench_light
    - service: light.turn_on
      entity_id:
        - light.laundry_room_light
    - service: light.turn_on
      entity_id:
        - light.basement_lamp
    - delay:
        seconds: 1

  #################################################################
  ## Basement Lights Off Center Pico Button
  #################################################################

- alias: Lights - Basement Lights Off Center Pico Button
  id: 'lights_basement_lights_off_center_pico_button'

  trigger:
    - platform: event
      event_type: lutron_caseta_button_event
      event_data:
        serial: 42010030
        button_number: 3
        action: press

  condition:
    - condition: state
      entity_id: light.basement_lighting
      state: 'on'

  action:
    - service: light.turn_off
      entity_id:
        - light.basement_lighting
    - delay:
        seconds: 1

  #################################################################
  ## Bedroom Closet Lights On Pico Remote
  #################################################################

- alias: Lights - Bedroom Closet Lights On Pico Remote
  id: 'lights_bedroom_closet_lights_on_pico_remote'

  trigger:
    - platform: event
      event_type: lutron_caseta_button_event
      event_data:
        serial: 92034753
        button_number: 2
        action: press

  action:
    - service: light.turn_on
      entity_id:
        - light.bedroom_closet_lights
      data:
        brightness_pct: 100
        color_temp: 370

  #################################################################
  ## Bedroom Closet Lights Off Pico Remote
  #################################################################

- alias: Lights - Bedroom Closet Lights Off Pico Remote
  id: 'lights_bedroom_closet_lights_off_pico_remote'

  trigger:
    - platform: event
      event_type: lutron_caseta_button_event
      event_data:
        serial: 92034753
        button_number: 4
        action: press

  action:
    - service: light.turn_off
      entity_id:
        - light.bedroom_closet_lights
    - delay:
        seconds: 1

  #################################################################
  ## Bedroom Closet Lights Increase Brightness Pico Remote
  #################################################################

- alias: Lights - Bedroom Closet Lights Increase Brightness Pico Remote
  id: 'lights_bedroom_closet_lights_increase_brightness_pico_remote'

  trigger:
    - platform: event
      event_type: lutron_caseta_button_event
      event_data:
        serial: 92034753
        button_number: 5
        action: press

  action:
    - service: light.turn_on
      entity_id:
        - light.bedroom_closet_lights
      data:
        brightness_step_pct: 20
    - delay:
        seconds: 1

  #################################################################
  ## Bedroom Closet Lights Decrease Brightness Pico Remote
  #################################################################

- alias: Lights - Bedroom Closet Lights Decrease Brightness Pico Remote
  id: 'lights_bedroom_closet_lights_decrease_brightness_pico_remote'

  trigger:
    - platform: event
      event_type: lutron_caseta_button_event
      event_data:
        serial: 92034753
        button_number: 6
        action: press

  condition:
    - condition: state
      entity_id: light.bedroom_closet_lights
      state: 'on'

  action:
    - service: light.turn_on
      entity_id:
        - light.bedroom_closet_lights
      data:
        brightness_step_pct: -20
    - delay:
        seconds: 1

#################################################################
## Aurora Dimmers
#################################################################

  #################################################################
  ## Bedroom Lamps Dimmer
  #################################################################

  mode: queued
  max_exceeded: silent
- alias: Lights - Bedroom Lamps Dimmer
  id: 'lights_bedroom_lamps_dimmer'

  trigger:
    - platform: event
      event_type: state_changed
      event_data:
        entity_id: sensor.bedroom_lamps_dimmer_brightness
    - platform: state
      entity_id: sensor.bedroom_lamps_dimmer_brightness

  condition:
    - condition: template
      value_template: >-
        {{ as_timestamp(now()) - as_timestamp(states.sensor.uptime.last_changed) |
        int > 90 }}
    - condition: state
      entity_id: input_boolean.disable_light_dimmer
      state: 'off'
    - condition: state
      entity_id: group.household
      state: 'home'

  action:
    - service: light.turn_on
      target:
        entity_id: light.bedroom_lamps
      data:
        transition: "{{ 0.7 }}"
        brightness: "{{ trigger.to_state.state }}"

  #################################################################
  ## Bedroom Ceiling Dimmer
  #################################################################

  mode: queued
  max_exceeded: silent
- alias: Lights - Bedroom Ceiling Dimmer
  id: 'lights_bedroom_ceiling_dimmer'

  trigger:
    - platform: event
      event_type: state_changed
      event_data:
        entity_id: sensor.bedroom_ceiling_dimmer_brightness
    - platform: state
      entity_id: sensor.bedroom_ceiling_dimmer_brightness

  condition:
    - condition: template
      value_template: >-
        {{ as_timestamp(now()) - as_timestamp(states.sensor.uptime.last_changed) |
        int > 90 }}
    - condition: state
      entity_id: input_boolean.disable_light_dimmer
      state: 'off'
    - condition: state
      entity_id: group.household
      state: 'home'

  action:
    - service: light.turn_on
      target:
        entity_id: light.bedroom_ceiling
      data:
        transition: "{{ 0.7 }}"
        brightness: "{{ trigger.to_state.state }}"